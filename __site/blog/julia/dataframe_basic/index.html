<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
   <link rel="stylesheet" href="/libs/highlight/styles/github.min.css">
   
  <link rel="stylesheet" href="/css/franklin.css">
<link rel="stylesheet" href="/css/hypertext.css">
<link rel="icon" href="/assets/favicon.png">

   <title>Julia DataFrames: Techniques & Ninja Tricks</title>  
</head>
<body>
<header>
  <h1 style="color:#283747">software engineering</h1>
  <nav>
    <a href="/" class="current">Tags</a>
  | <a href="/blog/" >Notes</a>
  <hr/>
  </nav>
</header>


<!-- Content appended here -->
<div class="franklin-content"><h1 id="julia_dataframes_techniques_ninja_tricks__2"><a href="#julia_dataframes_techniques_ninja_tricks__2" class="header-anchor">Julia DataFrames: Techniques &amp; Ninja Tricks</a></h1>
<h2 id="installation__2"><a href="#installation__2" class="header-anchor">Installation</a></h2>
<pre><code class="language-julia">using Pkg
Pkg.add&#40;&quot;DataFrames&quot;&#41;
using DataFrames</code></pre>
<h2 id="constructing_dataframes__2"><a href="#constructing_dataframes__2" class="header-anchor">Constructing DataFrames</a></h2>
<h3 id="method_1_using_named_columns__2"><a href="#method_1_using_named_columns__2" class="header-anchor">Method 1: Using Named Columns</a></h3>
<pre><code class="language-julia">df &#61; DataFrame&#40;
    name &#61; &#91;&quot;Alice&quot;, &quot;Bob&quot;, &quot;Charlie&quot;&#93;,
    age &#61; &#91;25, 30, 35&#93;,
    salary &#61; &#91;50000, 60000, 75000&#93;
&#41;</code></pre>
<h3 id="method_2_from_a_matrix__2"><a href="#method_2_from_a_matrix__2" class="header-anchor">Method 2: From a Matrix</a></h3>
<pre><code class="language-julia"># Create a matrix
matrix &#61; &#91;1 2 3; 4 5 6; 7 8 9&#93;

# Convert to DataFrame with automatic column names
df &#61; DataFrame&#40;matrix, :auto&#41;

# Or with custom column names
df &#61; DataFrame&#40;matrix, &#91;&quot;col1&quot;, &quot;col2&quot;, &quot;col3&quot;&#93;&#41;</code></pre>
<h3 id="method_2b_horizontal_concatenation_of_multiple_matrices_space-efficient__2"><a href="#method_2b_horizontal_concatenation_of_multiple_matrices_space-efficient__2" class="header-anchor">Method 2b: Horizontal Concatenation of Multiple Matrices &#40;Space-Efficient&#33;&#41;</a></h3>
<pre><code class="language-julia"># Multiple matrices with same number of rows
mat1 &#61; &#91;1 2; 3 4; 5 6&#93;        # 3x2
mat2 &#61; &#91;7 8 9; 10 11 12; 13 14 15&#93;  # 3x3
mat3 &#61; &#91;16; 17; 18&#93;            # 3x1

# Option 1: Use hcat to concatenate, then create DataFrame
combined_matrix &#61; hcat&#40;mat1, mat2, mat3&#41;
df &#61; DataFrame&#40;combined_matrix, :auto&#41;

# Option 2: Create DataFrame from each matrix, then hcat DataFrames
df &#61; hcat&#40;
    DataFrame&#40;mat1, &#91;:A, :B&#93;&#41;,
    DataFrame&#40;mat2, &#91;:C, :D, :E&#93;&#41;,
    DataFrame&#40;mat3, &#91;:F&#93;&#41;
&#41;

# Option 3: Most efficient - build DataFrame column by column from matrix columns
df &#61; DataFrame&#40;&#41;
for &#40;i, col&#41; in enumerate&#40;eachcol&#40;mat1&#41;&#41;
    df&#91;&#33;, Symbol&#40;&quot;mat1_col&#36;i&quot;&#41;&#93; &#61; col
end
for &#40;i, col&#41; in enumerate&#40;eachcol&#40;mat2&#41;&#41;
    df&#91;&#33;, Symbol&#40;&quot;mat2_col&#36;i&quot;&#41;&#93; &#61; col
end
df&#91;&#33;, :mat3_col1&#93; &#61; mat3&#91;:&#93;

# Option 4: Using Tables.jl interface &#40;very efficient, no copying&#33;&#41;
using Tables
mat1 &#61; &#91;1 2; 3 4; 5 6&#93;
mat2 &#61; &#91;7 8; 9 10; 11 12&#93;

# Create a NamedTuple of columns &#40;views, not copies&#33;&#41;
columns &#61; &#40;
    mat1_col1 &#61; @view&#40;mat1&#91;:, 1&#93;&#41;,
    mat1_col2 &#61; @view&#40;mat1&#91;:, 2&#93;&#41;,
    mat2_col1 &#61; @view&#40;mat2&#91;:, 1&#93;&#41;,
    mat2_col2 &#61; @view&#40;mat2&#91;:, 2&#93;&#41;
&#41;
df &#61; DataFrame&#40;columns&#41;  # This copies the views into the DataFrame

# Option 5: Most flexible - specify columns with custom names
df &#61; DataFrame&#40;
    feature1 &#61; mat1&#91;:, 1&#93;,
    feature2 &#61; mat1&#91;:, 2&#93;,
    feature3 &#61; mat2&#91;:, 1&#93;,
    target &#61; mat3&#91;:&#93;
&#41;</code></pre>
<h3 id="method_3_from_a_dictionary__2"><a href="#method_3_from_a_dictionary__2" class="header-anchor">Method 3: From a Dictionary</a></h3>
<pre><code class="language-julia">dict &#61; Dict&#40;
    &quot;name&quot; &#61;&gt; &#91;&quot;Alice&quot;, &quot;Bob&quot;, &quot;Charlie&quot;&#93;,
    &quot;age&quot; &#61;&gt; &#91;25, 30, 35&#93;
&#41;
df &#61; DataFrame&#40;dict&#41;</code></pre>
<h3 id="method_4_empty_dataframe_then_add_columns__2"><a href="#method_4_empty_dataframe_then_add_columns__2" class="header-anchor">Method 4: Empty DataFrame &#40;Then Add Columns&#41;</a></h3>
<pre><code class="language-julia">df &#61; DataFrame&#40;&#41;
df.name &#61; &#91;&quot;Alice&quot;, &quot;Bob&quot;&#93;
df.age &#61; &#91;25, 30&#93;</code></pre>
<h3 id="method_5_from_named_tuples__2"><a href="#method_5_from_named_tuples__2" class="header-anchor">Method 5: From Named Tuples</a></h3>
<pre><code class="language-julia">df &#61; DataFrame&#40;&#91;
    &#40;name&#61;&quot;Alice&quot;, age&#61;25, city&#61;&quot;NYC&quot;&#41;,
    &#40;name&#61;&quot;Bob&quot;, age&#61;30, city&#61;&quot;LA&quot;&#41;
&#93;&#41;</code></pre>
<h2 id="basic_operations__2"><a href="#basic_operations__2" class="header-anchor">Basic Operations</a></h2>
<h3 id="viewing_data__2"><a href="#viewing_data__2" class="header-anchor">Viewing Data</a></h3>
<pre><code class="language-julia">first&#40;df, 5&#41;      # First 5 rows
last&#40;df, 3&#41;       # Last 3 rows
describe&#40;df&#41;      # Summary statistics
names&#40;df&#41;         # Column names
nrow&#40;df&#41;          # Number of rows
ncol&#40;df&#41;          # Number of columns
size&#40;df&#41;          # Dimensions &#40;rows, cols&#41;</code></pre>
<h3 id="selecting_columns__2"><a href="#selecting_columns__2" class="header-anchor">Selecting Columns</a></h3>
<pre><code class="language-julia">df.name                    # Single column as vector
df&#91;:, :name&#93;              # Single column as vector
df&#91;:, &#91;:name, :age&#93;&#93;      # Multiple columns as DataFrame
select&#40;df, :name, :age&#41;   # Using select function</code></pre>
<h3 id="selecting_rows__2"><a href="#selecting_rows__2" class="header-anchor">Selecting Rows</a></h3>
<pre><code class="language-julia">df&#91;1, :&#93;                  # First row
df&#91;1:3, :&#93;               # Rows 1-3
df&#91;df.age .&gt; 25, :&#93;      # Conditional selection</code></pre>
<h3 id="adding_columns__2"><a href="#adding_columns__2" class="header-anchor">Adding Columns</a></h3>
<pre><code class="language-julia">df.bonus &#61; df.salary .* 0.1
df&#91;&#33;, :total&#93; &#61; df.salary .&#43; df.bonus</code></pre>
<h3 id="removing_columns__2"><a href="#removing_columns__2" class="header-anchor">Removing Columns</a></h3>
<pre><code class="language-julia">select&#33;&#40;df, Not&#40;:bonus&#41;&#41;           # Remove in-place
df2 &#61; select&#40;df, Not&#40;:bonus&#41;&#41;      # Create new DataFrame</code></pre>
<h2 id="ninja_tricks__2"><a href="#ninja_tricks__2" class="header-anchor">Ninja Tricks ðŸ¥·</a></h2>
<h3 id="transform_with_broadcasting_avoid_loops__2"><a href="#transform_with_broadcasting_avoid_loops__2" class="header-anchor"><ol>
<li><p>Transform with Broadcasting &#40;Avoid Loops&#33;&#41;</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Bad: Loop through rows
for i in 1:nrow&#40;df&#41;
    df&#91;i, :doubled&#93; &#61; df&#91;i, :age&#93; * 2
end

# Good: Broadcasting
df.doubled &#61; df.age .* 2</code></pre>
<h3 id="ol_start2_chain_operations_with_pipes__2"><a href="#ol_start2_chain_operations_with_pipes__2" class="header-anchor"><ol start="2">
<li><p>Chain Operations with Pipes</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia">df |&gt; 
    df -&gt; filter&#40;row -&gt; row.age &gt; 25, df&#41; |&gt;
    df -&gt; select&#40;df, :name, :salary&#41; |&gt;
    df -&gt; sort&#40;df, :salary, rev&#61;true&#41;</code></pre>
<h3 id="ol_start3_use_transform_and_select_for_cleaner_code__2"><a href="#ol_start3_use_transform_and_select_for_cleaner_code__2" class="header-anchor"><ol start="3">
<li><p>Use <code>transform</code> and <code>select</code> for Cleaner Code</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Add new columns without mutation
df2 &#61; transform&#40;df, :salary &#61;&gt; &#40;x -&gt; x .* 1.1&#41; &#61;&gt; :new_salary&#41;

# Multiple transformations at once
df2 &#61; transform&#40;df,
    :salary &#61;&gt; &#40;x -&gt; x .* 1.1&#41; &#61;&gt; :raised_salary,
    :age &#61;&gt; &#40;x -&gt; x .&#43; 1&#41; &#61;&gt; :age_next_year
&#41;</code></pre>
<h3 id="ol_start4_byrow_for_element-wise_operations__2"><a href="#ol_start4_byrow_for_element-wise_operations__2" class="header-anchor"><ol start="4">
<li><p>ByRow for Element-wise Operations</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Apply function to each row
transform&#40;df, :name &#61;&gt; ByRow&#40;uppercase&#41; &#61;&gt; :name_upper&#41;

# Custom function on multiple columns
transform&#40;df, &#91;:age, :salary&#93; &#61;&gt; ByRow&#40;&#40;a, s&#41; -&gt; s / a&#41; &#61;&gt; :salary_per_age&#41;</code></pre>
<h3 id="ol_start5_groupby_and_combine_power__2"><a href="#ol_start5_groupby_and_combine_power__2" class="header-anchor"><ol start="5">
<li><p>GroupBy and Combine Power</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Group by category and aggregate
grouped &#61; groupby&#40;df, :department&#41;
combine&#40;grouped, :salary &#61;&gt; mean &#61;&gt; :avg_salary&#41;

# Multiple aggregations
combine&#40;grouped,
    :salary &#61;&gt; mean &#61;&gt; :avg_salary,
    :salary &#61;&gt; sum &#61;&gt; :total_salary,
    nrow &#61;&gt; :count
&#41;</code></pre>
<h3 id="ol_start6_subset_with_complex_conditions__2"><a href="#ol_start6_subset_with_complex_conditions__2" class="header-anchor"><ol start="6">
<li><p>Subset with Complex Conditions</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Using subset function &#40;better than boolean indexing&#41;
subset&#40;df, :age &#61;&gt; x -&gt; x .&gt; 25, :salary &#61;&gt; x -&gt; x .&lt; 70000&#41;

# Skip missing values automatically
subset&#40;df, :age &#61;&gt; x -&gt; x .&gt; 25, skipmissing&#61;true&#41;</code></pre>
<h3 id="ol_start7_in-place_operations_save_memory__2"><a href="#ol_start7_in-place_operations_save_memory__2" class="header-anchor"><ol start="7">
<li><p>In-Place Operations &#40;Save Memory&#33;&#41;</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Most functions have in-place versions with &#33;
sort&#33;&#40;df, :age&#41;              # Sorts df directly
select&#33;&#40;df, Not&#40;:temp_col&#41;&#41;  # Removes column from df
transform&#33;&#40;df, :age &#61;&gt; &#40;x -&gt; x .&#43; 1&#41; &#61;&gt; :age&#41;  # Modifies df</code></pre>
<h3 id="ol_start8_missing_data_handling__2"><a href="#ol_start8_missing_data_handling__2" class="header-anchor"><ol start="8">
<li><p>Missing Data Handling</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Check for missing
any&#40;ismissing, df.age&#41;

# Remove rows with any missing
dropmissing&#40;df&#41;

# Remove rows with missing in specific columns
dropmissing&#40;df, :age&#41;

# Replace missing values
coalesce.&#40;df.age, 0&#41;  # Replace missing with 0</code></pre>
<h3 id="ol_start9_rename_columns_efficiently__2"><a href="#ol_start9_rename_columns_efficiently__2" class="header-anchor"><ol start="9">
<li><p>Rename Columns Efficiently</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Rename specific columns
rename&#40;df, :old_name &#61;&gt; :new_name&#41;

# Rename multiple at once
rename&#40;df, :name &#61;&gt; :employee, :salary &#61;&gt; :pay&#41;

# Apply function to all column names
rename&#40;lowercase, df&#41;
rename&#40;x -&gt; x * &quot;_2024&quot;, df&#41;</code></pre>
<h3 id="ol_start10_stack_and_unstack_reshape_data__2"><a href="#ol_start10_stack_and_unstack_reshape_data__2" class="header-anchor"><ol start="10">
<li><p>Stack and Unstack &#40;Reshape Data&#41;</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Wide to long format
long_df &#61; stack&#40;df, &#91;:col1, :col2&#93;, :id&#41;

# Long to wide format
wide_df &#61; unstack&#40;long_df, :id, :variable, :value&#41;</code></pre>
<h3 id="ol_start11_joins_made_easy__2"><a href="#ol_start11_joins_made_easy__2" class="header-anchor"><ol start="11">
<li><p>Joins Made Easy</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia">df1 &#61; DataFrame&#40;id&#61;&#91;1,2,3&#93;, name&#61;&#91;&quot;A&quot;,&quot;B&quot;,&quot;C&quot;&#93;&#41;
df2 &#61; DataFrame&#40;id&#61;&#91;1,2,4&#93;, value&#61;&#91;10,20,40&#93;&#41;

innerjoin&#40;df1, df2, on&#61;:id&#41;      # Only matching rows
leftjoin&#40;df1, df2, on&#61;:id&#41;       # All from df1
rightjoin&#40;df1, df2, on&#61;:id&#41;      # All from df2
outerjoin&#40;df1, df2, on&#61;:id&#41;      # All rows</code></pre>
<h3 id="ol_start12_performance_tip_use_views__2"><a href="#ol_start12_performance_tip_use_views__2" class="header-anchor"><ol start="12">
<li><p>Performance Tip: Use Views</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Create a view instead of copying
view_df &#61; @view df&#91;1:100, :&#93;

# SubDataFrame for non-copying selection
sub_df &#61; df&#91;1:100, :&#93;  # Makes a copy
sub_df &#61; @view df&#91;1:100, :&#93;  # No copy, faster&#33;</code></pre>
<h3 id="ol_start13_macro_magic_for_cleaner_syntax__2"><a href="#ol_start13_macro_magic_for_cleaner_syntax__2" class="header-anchor"><ol start="13">
<li><p>Macro Magic for Cleaner Syntax</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia">using DataFramesMeta

# @select, @transform, @subset with cleaner syntax
@select&#40;df, :name, :age&#41;
@transform&#40;df, :age_squared &#61; :age .^ 2&#41;
@subset&#40;df, :age .&gt; 25&#41;

# Chain with @chain
@chain df begin
    @subset&#40;:age .&gt; 25&#41;
    @transform&#40;:bonus &#61; :salary .* 0.1&#41;
    @select&#40;:name, :salary, :bonus&#41;
end</code></pre>
<h3 id="ol_start14_convert_back_to_matrix_or_array__2"><a href="#ol_start14_convert_back_to_matrix_or_array__2" class="header-anchor"><ol start="14">
<li><p>Convert Back to Matrix or Array</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># To matrix
matrix &#61; Matrix&#40;df&#41;

# Specific columns to matrix
matrix &#61; Matrix&#40;select&#40;df, &#91;:age, :salary&#93;&#41;&#41;

# To array of arrays &#40;column-wise&#41;
arrays &#61; &#91;df&#91;:, col&#93; for col in names&#40;df&#41;&#93;</code></pre>
<h3 id="ol_start15_fast_iteration_with_eachrow__2"><a href="#ol_start15_fast_iteration_with_eachrow__2" class="header-anchor"><ol start="15">
<li><p>Fast Iteration with eachrow</p>
</li>
</ol>
</a></h3>
<pre><code class="language-julia"># Iterate over rows efficiently
for row in eachrow&#40;df&#41;
    println&#40;&quot;&#36;&#40;row.name&#41; is &#36;&#40;row.age&#41; years old&quot;&#41;
end

# Or use eachcol for columns
for &#40;colname, col&#41; in pairs&#40;eachcol&#40;df&#41;&#41;
    println&#40;&quot;Column &#36;colname has mean &#36;&#40;mean&#40;skipmissing&#40;col&#41;&#41;&#41;&quot;&#41;
end</code></pre>
<h2 id="pro_tips__2"><a href="#pro_tips__2" class="header-anchor">Pro Tips</a></h2>
<ul>
<li><p><strong>Use <code>&#33;</code> functions</strong> to modify in-place and save memory</p>
</li>
<li><p><strong>Use <code>.</code> broadcasting</strong> instead of loops for vectorized operations</p>
</li>
<li><p><strong>Use <code>@view</code></strong> when you don&#39;t need to modify data to avoid copies</p>
</li>
<li><p><strong>Use <code>ByRow</code></strong> for row-wise operations in transform/select</p>
</li>
<li><p><strong>Chain operations</strong> with pipes <code>|&gt;</code> or <code>@chain</code> for readable code</p>
</li>
<li><p><strong>Use <code>DataFramesMeta.jl</code></strong> for SQL-like syntax and cleaner transformations</p>
</li>
</ul>
<h2 id="common_pitfalls_to_avoid__2"><a href="#common_pitfalls_to_avoid__2" class="header-anchor">Common Pitfalls to Avoid</a></h2>
<ol>
<li><p><strong>Don&#39;t forget the <code>.</code> for broadcasting</strong>: <code>df.age * 2</code> vs <code>df.age .* 2</code></p>
</li>
<li><p><strong>Use <code>:</code> vs <code>&#33;</code> carefully</strong>: <code>:</code> copies, <code>&#33;</code> references the actual column</p>
</li>
<li><p><strong>Handle missing data</strong>: Always consider <code>skipmissing&#61;true</code> or <code>coalesce</code></p>
</li>
<li><p><strong>Index with ranges</strong>: <code>df&#91;1:3, :&#93;</code> not just <code>df&#91;1:3&#93;</code></p>
</li>
</ol>
<div class="page-foot">
    Contact me by <a href="mailto:skchu@wustl.edu">E-mail</a> | <a href="https://github.com/kchu25">Github</a> | <a href="https://www.linkedin.com/in/kchu1/">Linkedin</a>
    <br>
    This work is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.  Last modified: October 15, 2025.
    <br>
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia language</a>.
</div>
</div><!-- CONTENT ENDS HERE -->
    
    
        <script src="/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>

    
  </body>
</html>
